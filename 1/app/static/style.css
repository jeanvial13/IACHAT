/* ========================================================= */
/*                 BASE DEL SISTEMA ANDRES IA                */
/* ========================================================= */

* { box-sizing:border-box; }

body {
  margin:0;
  padding:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#02040a;
  color:#f5f5f5;
  overflow:hidden;
}

.app {
  display:flex;
  height:100vh;
  position:relative;
  z-index:1;
}

/* ========================================================= */
/*                         SIDEBAR                           */
/* ========================================================= */

.sidebar {
  width:280px;
  background:radial-gradient(circle at top,#111827 0,#020617 55%,#000 100%);
  color:#e5e7eb;
  padding:16px;
  border-right:1px solid #1f2937;
  display:flex;
  flex-direction:column;
  gap:16px;
  position:relative;
  z-index:3;
  box-shadow:0 0 18px #00eaff15 inset;
}

.sidebar h1 {
  margin:0;
  font-size:20px;
  line-height:1.1;
  color:#22c55e;
  text-shadow:0 0 10px #22c55e55;
}

/* ========================================================= */
/*                       BOTONES BASE                        */
/* ========================================================= */

.sidebar button,
.chat-input-area button,
#upload-btn {
  background:#22c55e;
  border:none;
  border-radius:999px;
  padding:8px 14px;
  color:#020617;
  font-weight:600;
  cursor:pointer;
  transition:0.15s all;
  font-size:14px;
  box-shadow:0 0 10px #22c55e55;
  position:relative;
  overflow:hidden;
}

.sidebar button:hover,
.chat-input-area button:hover,
#upload-btn:hover {
  filter:brightness(1.15);
  transform:translateY(-2px) scale(1.02);
  box-shadow:0 0 15px #22c55e88;
}

/* ========================================================= */
/*                 ESTILO SELECTOR DE MODELO                 */
/* ========================================================= */

#model-select {
  border-radius:999px;
  border:1px solid #374151;
  background:#020617;
  color:#e5e7eb;
  padding:6px 10px;
  font-size:13px;
  box-shadow:0 0 10px #00eaff22 inset;
}

/* ========================================================= */
/*                INPUT FILE CUSTOM ULTRA PRO                */
/* ========================================================= */

.section input[type="file"] {
  display:none;
}

/* Caja estilizada */
.custom-file-upload {
  background:#0d1b2a;
  border:1px solid #00eaff55;
  padding:10px 14px;
  border-radius:12px;
  color:#a8eaff;
  font-size:13px;
  cursor:pointer;
  text-align:center;
  margin-bottom:6px;
  box-shadow:0 0 12px #00eaff33 inset;
  transition:0.25s ease;
}

.custom-file-upload:hover {
  background:#112b3d;
  border-color:#00eaff;
  box-shadow:0 0 18px #00eaff88 inset;
  transform:translateY(-2px);
}

/* ========================================================= */
/*                      CHAT Y BURBUJAS                      */
/* ========================================================= */

.chat {
  flex:1;
  display:flex;
  flex-direction:column;
  background:radial-gradient(circle at top,#0f172a 0,#020617 55%,#000 100%);
  position:relative;
  overflow:hidden;
}

.chat-header {
  padding:10px 16px;
  border-bottom:1px solid #111827;
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-size:14px;
}

.status-dot {
  color:#22c55e;
  font-size:12px;
  margin-left:4px;
  text-shadow:0 0 6px #22c55eaa;
}

.chat-log {
  flex:1;
  overflow-y:auto;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:8px;
  position:relative;
  z-index:2;
}

.msg { display:flex; }

.msg.user { justify-content:flex-end; }
.msg.assistant { justify-content:flex-start; }

/* ========================================================= */
/*               BURBUJAS DE CHAT HOLOGRAFICAS               */
/* ========================================================= */

.bubble {
  max-width:70%;
  padding:10px 12px;
  border-radius:16px;
  font-size:14px;
  white-space:pre-wrap;
  line-height:1.35;
  position:relative;
}

.msg.user .bubble {
  background:#22c55e;
  color:#022c16;
  border-bottom-right-radius:4px;
  box-shadow:0 0 10px #22c55e66;
}

/* HOLOGRAMA 3D */
.msg.assistant .bubble {
  background:rgba(3,15,30,0.6);
  backdrop-filter:blur(6px);
  border:1px solid #00eaff33;
  color:#e5e7eb;
  border-bottom-left-radius:4px;
  box-shadow:
    0 0 15px #00eaff44,
    inset 0 0 10px #00557766;
}

.msg.assistant .bubble::after {
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background:linear-gradient(120deg, transparent 0%, rgba(0,255,255,0.15) 50%, transparent 100%);
  animation:holo-scan 3s infinite;
  pointer-events:none;
}

@keyframes holo-scan {
  0% { transform:translateX(-100%); }
  100% { transform:translateX(100%); }
}

/* ========================================================= */
/*                  ÁREA DE INPUT DE CHAT                    */
/* ========================================================= */

.chat-input-area {
  display:flex;
  gap:8px;
  padding:10px 16px;
  border-top:1px solid #111827;
}

.chat-input-area textarea {
  flex:1;
  resize:none;
  border-radius:999px;
  border:1px solid #374151;
  background:#020617;
  color:#e5e7eb;
  font-size:14px;
  padding:10px 14px;
  max-height:160px;
  min-height:40px;
  box-shadow:0 0 8px #00eaff22 inset;
}

/* ========================================================= */
/*               BOTÓN ULTRA CYBERPUNK (GLITCH)              */
/* ========================================================= */

.token-usage-btn {
  position:relative;
  display:block;
  padding:12px 14px;
  border-radius:12px;
  background:linear-gradient(135deg,#0d1b2a,#1b263b);
  color:#00e1ff;
  font-weight:600;
  font-size:14px;
  text-align:center;
  text-decoration:none;
  border:1px solid #00e1ff;
  overflow:hidden;
  animation:pulse 2.5s infinite;
  box-shadow:0 0 12px #00e1ff88;
}

@keyframes pulse {
  0% { box-shadow:0 0 8px #00e1ff55; }
  50% { box-shadow:0 0 16px #00e1ffbb; }
  100% { box-shadow:0 0 8px #00e1ff55; }
}

.token-usage-btn::before,
.token-usage-btn::after {
  content:attr(data-text);
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:600;
  opacity:0;
  pointer-events:none;
}

.token-usage-btn::before { color:#ff00ff; left:2px; }
.token-usage-btn::after { color:#00ffff; left:-2px; }

.token-usage-btn:hover::before,
.token-usage-btn:hover::after {
  animation:text-glitch 0.12s infinite alternate;
  opacity:0.8;
}

@keyframes text-glitch {
  0% { transform:translate(1px,-1px); opacity:0.4; }
  100% { transform:translate(-1px,1px); opacity:0.8; }
}

/* ========================================================= */
/*                EFECTOS DE FONDO ULTRA CYBERPUNK           */
/* ========================================================= */

/* Partículas neon */
body::before {
  content:"";
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  background:
    radial-gradient(circle at 20% 30%,rgba(0,255,255,0.06),transparent 40%),
    radial-gradient(circle at 80% 60%,rgba(255,0,255,0.04),transparent 50%),
    radial-gradient(circle at 40% 80%,rgba(0,200,255,0.05),transparent 50%);
  animation:pulse-neon 6s infinite alternate ease-in-out;
  z-index:0;
  opacity:0.4;
}

@keyframes pulse-neon {
  0% { opacity:0.3; }
  100% { opacity:0.55; }
}

/* Triangulación animada */
body::after {
  content:"";
  position:fixed;
  inset:0;
  background-image:
    repeating-linear-gradient(60deg,rgba(0,255,255,0.05) 0,transparent 60px),
    repeating-linear-gradient(120deg,rgba(255,0,255,0.05) 0,transparent 60px);
  animation: triangulo-move 12s linear infinite;
  pointer-events:none;
  z-index:0;
}

@keyframes triangulo-move {
  0% { background-position:0 0; }
  100% { background-position:300px 600px; }
}

/* Estático digital */
.app::before {
  content:"";
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR4nGP4+/v/AwAI/AL+DNCDNQAAAABJRU5ErkJggg==');
  background-size:3px 3px;
  mix-blend-mode:overlay;
  pointer-events:none;
  animation:static-noise 0.25s infinite;
  opacity:0.06;
  z-index:1;
}

@keyframes static-noise {
  0% { opacity:0.02; }
  50% { opacity:0.08; }
  100% { opacity:0.02; }
}

/* Scan CRT */
.chat::before {
  content:"";
  position:absolute;
  left:0; top:0;
  width:100%; height:100%;
  pointer-events:none;
  background:linear-gradient(transparent,rgba(255,255,255,0.06),transparent);
  animation:crt-scan 4s linear infinite;
  opacity:0.15;
  z-index:1;
}

@keyframes crt-scan {
  0% { transform:translateY(-100%); }
  100% { transform:translateY(100%); }
}

/* ========================================================= */
/*                    EFECTOS EXTRA PLUS                     */
/* ========================================================= */

/* Neon flow */
button::after,
.token-usage-btn::after {
  content:"";
  position:absolute;
  top:0; left:-200%;
  width:200%; height:100%;
  background:linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);
  animation: neon-flow 3s infinite;
}

@keyframes neon-flow {
  0% { left:-200%; }
  100% { left:200%; }
}

/* RGB SHIFT GLOBAL (hover) */
body:hover {
  text-shadow:
    1px 0px 1px #ff0088,
    -1px 0px 1px #00eaff;
}

/* Vortex al limpiar */
#clear-btn:active {
  animation: vortex 0.35s ease-out;
}

@keyframes vortex {
  0% { filter: blur(0px) brightness(1); transform: scale(1); }
  50% { filter: blur(4px) brightness(1.4); transform: scale(1.3) rotate(10deg); }
  100% { filter: blur(0px) brightness(1); transform: scale(1); }
}

/* ========================================================= */
/*                 CURSOR CYBERPUNK NETRUNNER                */
/* ========================================================= */

body {
  cursor:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\
<polygon points="0,0 32,16 0,32" fill="%2300eaff"/>\
</svg>') 0 0, auto;
}

button:hover,
a:hover,
.custom-file-upload:hover {
  cursor:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\
<polygon points="0,0 32,16 0,32" fill="%23ff00ff"/>\
</svg>') 0 0, auto;
}

/* ========================================================= */
/*                        RESPONSIVE                         */
/* ========================================================= */

@media(max-width:780px){
  .app { flex-direction:column; }
  .sidebar {
    width:100%;
    flex-direction:row;
    overflow-x:auto;
    gap:12px;
    align-items:center;
  }
  .section.small { margin-top:0; }
}
