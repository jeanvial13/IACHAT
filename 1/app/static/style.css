/* =====================================================================
   CYBERPUNK 2077 — LUCY MODE + CYBERPSYCHO MODE + ULTRA VISUAL PACK V12
   ===================================================================== */

/* ------------------------------------------
   FIX GENERAL: evitar scrollbar horizontal
------------------------------------------- */

html, body {
    overflow-x: hidden !important;
    width: 100%;
    margin: 0;
    padding: 0;
}

/* ------------------------------------------
   BASE VISUALS – FOG, SCANLINES, COLOR LAYERS
------------------------------------------- */

body {
    background: #02040a;
    color: #f5f5f5;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    position: relative;
}

/* Fog energético */
body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at 30% 20%, rgba(255,255,0,0.12), transparent 60%),
                radial-gradient(circle at 80% 70%, rgba(255,255,0,0.08), transparent 60%);
    pointer-events: none;
    z-index: 2;
    animation: fogMove 25s ease-in-out infinite;
}

@keyframes fogMove {
    0%   { filter: blur(28px); opacity: .4; }
    50%  { filter: blur(40px); opacity: .6; }
    100% { filter: blur(28px); opacity: .4; }
}

/* Scanlines */
body::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 3;
    background: repeating-linear-gradient(
        90deg,
        rgba(255,255,0,0.04) 0px,
        rgba(255,255,0,0.04) 1px,
        transparent 4px,
        transparent 7px
    );
    animation: scanSlide 12s linear infinite;
    opacity: .08;
}

@keyframes scanSlide {
    from { transform: translateX(0); }
    to { transform: translateX(-300px); }
}

/* ------------------------------------------
   SIDEBAR & CHAT GENERAL GLOW
------------------------------------------- */

.sidebar,
.chat {
    box-shadow:
        inset 0 0 50px rgba(255,255,0,0.07),
        inset 0 0 100px rgba(255,255,0,0.04),
        0 0 40px rgba(255,255,0,0.06);
}

/* Línea energética entre panel izquierdo y chat */
.app::before {
    content:"";
    position: fixed;
    left: 280px;
    top: 0;
    width: 3px;
    height: 100%;
    background: linear-gradient(
        to bottom,
        rgba(0,255,255,0) 0%,
        cyan 50%,
        transparent 100%
    );
    box-shadow: 0 0 15px cyan, 0 0 25px #00ffffaa;
    animation: energyFlow 4s linear infinite;
    z-index: 5;
}

@keyframes energyFlow {
    0% { transform: translateY(0); opacity: .3; }
    50% { transform: translateY(50px); opacity: 1; }
    100% { transform: translateY(0); opacity: .3; }
}

/* ------------------------------------------
   BUBBLES – GLOW LUCY
------------------------------------------- */

.msg.assistant .bubble,
.msg.user .bubble {
    position: relative;
    animation: lucyGlow 3.5s ease-in-out infinite;
}

@keyframes lucyGlow {
    0%   { box-shadow: 0 0 6px #00eaff50, 0 0 15px #fff0; }
    50%  { box-shadow: 0 0 12px #00eaff90, 0 0 25px #00eaff40; }
    100% { box-shadow: 0 0 6px #00eaff50, 0 0 15px #fff0; }
}

/* ------------------------------------------
   TYPING GLITCH – textarea
------------------------------------------- */

#chat-input {
    position: relative;
    filter: drop-shadow(0 0 4px #00eaff);
}

#chat-input:focus {
    animation: typingGlitch .25s steps(2) infinite;
}

@keyframes typingGlitch {
    0%   { text-shadow: 2px 0 #00ffe1, -2px 0 #fff; }
    50%  { text-shadow: -2px 0 #00ffe1, 2px 0 #fff; }
    100% { text-shadow: 2px 0 #00ffe1, -2px 0 #fff; }
}

/* ------------------------------------------
   BOTONES – GLITCH + PULSE
------------------------------------------- */

button,
.file-upload-btn,
#upload-btn,
#clear-btn {
    position: relative;
    overflow: hidden;
}

button::after,
.file-upload-btn::after {
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(
        90deg,
        transparent 0%,
        rgba(255,255,0,0.25) 50%,
        transparent 100%
    );
    opacity: 0;
    transform: translateX(-100%);
    transition: .2s;
}

button:hover::after,
.file-upload-btn:hover::after {
    opacity: 1;
    transform: translateX(100%);
}

button:hover,
.file-upload-btn:hover {
    filter: drop-shadow(0 0 10px yellow) brightness(1.25);
    transform: translateY(-2px) scale(1.03);
}

.chat-input-area button:hover {
    animation: lucyPulse 0.5s ease-in-out forwards;
}

@keyframes lucyPulse {
    0% { box-shadow: 0 0 5px #00ffd0; }
    50% { box-shadow: 0 0 25px #00ffd0, 0 0 45px #fff; transform: scale(1.05); }
    100% { box-shadow: 0 0 10px #00ffd0; transform: scale(1); }
}

/* ------------------------------------------
   PARTICLES – NEON YELLOW
------------------------------------------- */

.particle {
    position: fixed;
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: yellow;
    box-shadow: 0 0 12px yellow, 0 0 22px rgba(255,255,0,0.7);
    opacity: .6;
    pointer-events: none;
    z-index: 4;
    animation: floatParticle 8s infinite ease-in-out;
}

@keyframes floatParticle {
    0%   { transform: translateY(0) translateX(0) scale(.9); opacity:.5; }
    50%  { transform: translateY(-50px) translateX(25px) scale(1.3); opacity:.9; }
    100% { transform: translateY(0) translateX(0) scale(.9); opacity:.5; }
}

.particle:nth-child(odd)  { animation-duration: 6s; }
.particle:nth-child(even) { animation-duration: 10s; }
.particle:nth-child(3n)   { animation-duration: 12s; }
.particle:nth-child(5n)   { animation-duration: 14s; }

/* ------------------------------------------
   GHOST TRAIL – LUCY SPEED EFFECT
------------------------------------------- */

.ghost {
    position: fixed;
    width: 12px;
    height: 12px;
    border-radius: 50%;
    pointer-events: none;
    background: rgba(0,255,255,0.9);
    box-shadow: 0 0 15px #00eeff, 0 0 30px #00eeff;
    animation: ghostFade .6s linear forwards;
    z-index: 99999;
}

@keyframes ghostFade {
    from { transform: scale(1); opacity: 1; }
    to   { transform: scale(2.5); opacity: 0; }
}

/* ------------------------------------------
   CYBERPSYCHO MODE – SCREEN SHAKE, BLUR, ABERRATION
------------------------------------------- */

.app {
    animation: psychoHue 6s linear infinite;
}

@keyframes psychoHue {
    0%   { filter: none; }
    25%  { filter: hue-rotate(10deg) saturate(1.2); }
    50%  { filter: hue-rotate(-10deg) saturate(1.4) contrast(1.15); }
    75%  { filter: hue-rotate(4deg) blur(.4px); }
    100% { filter: none; }
}

/* Shake suave ocasional */
@keyframes psychoShake {
    0% { transform: translate(0,0); }
    25% { transform: translate(2px,-2px); }
    50% { transform: translate(-2px,2px); }
    75% { transform: translate(2px,1px); }
    100% { transform: translate(0,0); }
}

.chat-log {
    animation: psychoShake 7s infinite steps(1);
}

/* Chromatic Aberration sutil */
.chromatic {
    filter: drop-shadow(2px 0 red) drop-shadow(-2px 0 cyan);
}
